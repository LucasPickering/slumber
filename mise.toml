[tasks.cli]
description = "Run a CLI command"
quiet = true
run = "RUST_LOG=slumber=${LOG:-DEBUG} cargo run --no-default-features --features cli --"

[tasks.docs]
description = "Build and serve docs"
run = "mdbook serve docs/"

[tasks.favicon]
description = "Generate favicon for the site from the logo image"
run = "magick -background transparent $MISE_PROJECT_ROOT/static/slumber.png -define icon:auto-resize=64 $MISE_PROJECT_ROOT/docs/theme/favicon.png"
sources = ["docs/theme/favicon.png"]

[tasks.test]
run = "cargo test"

[env]
RUST_BACKTRACE = "1"

[tools]
"cargo:mdbook-pagetoc" = "0.2.0"
mdbook = "0.4"
vhs = "latest"
# ttyd is required for vhs. On macOS the only installation option is brew.
# There are no prebuilt binaries for macOS so we can't install via mise
